# Django Prise de Rendez-vous Coach/Client

![MCD](image_readme/banniere.png)

[![Licence](https://img.shields.io/badge/License-MIT-green.svg)](https://choosealicense.com/licenses/mit/)
![Python](https://img.shields.io/badge/Python-3.13-blue)
![Django](https://img.shields.io/badge/Django-5.2.4-orange)
![Bootstrap](https://img.shields.io/badge/Bootstrap-5.3-violet)

## üìò Pr√©sentation du projet

Ce projet est une application Django permettant la gestion de rendez-vous entre des coachs et leurs clients. Les utilisateurs peuvent s‚Äôinscrire, se connecter, prendre des rendez-vous, consulter leur tableau de bord, et annuler des s√©ances. Les coachs disposent d‚Äôun espace d√©di√© pour suivre leurs rendez-vous et ajouter des notes.

### üè¥‚Äç‚ò†Ô∏è Pourquoi une identit√© visuelle pirate ?

L‚Äôunivers graphique du site s‚Äôinspire de l‚Äôimaginaire pirate et maritime afin de proposer une exp√©rience utilisateur originale et engageante. Ce choix de direction artistique (DA) r√©pond √† plusieurs objectifs :

- **Se d√©marquer** des plateformes classiques de coaching, souvent trop neutres ou impersonnelles.

- √âvoquer le **voyage personnel** que repr√©sente le d√©veloppement de soi : comme un navire quittant le port pour une aventure int√©rieure.

- Cr√©er un **langage commun entre coachs et clients**, en les pla√ßant dans un m√™me √©quipage, embarqu√©s dans la qu√™te d‚Äôun objectif commun.

- Utiliser des m√©taphores positives : cap √† tenir (objectif), boussole (guidance), carte au tr√©sor (plan d‚Äôaction), etc.

Ce th√®me pirate rend la navigation plus ludique tout en renfor√ßant le message : **"capitaine de ton propre parcours"**.


## üèóÔ∏è Structure du projet

```bash
.
‚îú‚îÄ‚îÄ manage.py                    # Outil en ligne de commande pour g√©rer le projet Django
‚îú‚îÄ‚îÄ requirements.txt             # Liste des d√©pendances Python du projet
‚îú‚îÄ‚îÄ README.md                    # Documentation principale du projet
‚îú‚îÄ‚îÄ LICENCE                      # Licence du projet (MIT)
‚îú‚îÄ‚îÄ db.sqlite3                   # Base de donn√©es SQLite (par d√©faut en dev)
‚îÇ
‚îú‚îÄ‚îÄ coach_app/                   # Dossier de configuration principale du projet Django
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ settings.py              # Param√®tres du projet (apps, base de donn√©es, etc.)
‚îÇ   ‚îú‚îÄ‚îÄ urls.py                  # Routes principales (inclut les routes des apps)
‚îÇ   ‚îî‚îÄ‚îÄ wsgi.py                  # Interface WSGI pour le d√©ploiement
‚îÇ
‚îú‚îÄ‚îÄ rdv/                         # Application principale de gestion des rendez-vous
‚îÇ   ‚îú‚îÄ‚îÄ migrations/              # Fichiers de migration pour les mod√®les
‚îÇ   ‚îú‚îÄ‚îÄ tests/                   # Tests unitaires de l'application (mod√®les, vues, formulaires)
‚îÇ   ‚îú‚îÄ‚îÄ services/                # Fonction utilis√© dans les views
‚îÇ   ‚îú‚îÄ‚îÄ admin.py                 # Configuration de l'interface d'administration
‚îÇ   ‚îú‚îÄ‚îÄ apps.py                  # Configuration de l‚Äôapplication `rdv`
‚îÇ   ‚îú‚îÄ‚îÄ forms.py                 # Formulaires personnalis√©s (prise de RDV, annulation)
‚îÇ   ‚îú‚îÄ‚îÄ models.py                # Mod√®le `Seance` (rendez-vous)
‚îÇ   ‚îú‚îÄ‚îÄ urls.py                  # Routes de l‚Äôapplication `rdv`
‚îÇ   ‚îî‚îÄ‚îÄ views.py                 # Logique m√©tier (dashboard, prise RDV, etc.)
‚îÇ
‚îú‚îÄ‚îÄ accounts/                    # Application pour la gestion des comptes utilisateurs
‚îÇ   ‚îú‚îÄ‚îÄ migrations/
‚îÇ   ‚îú‚îÄ‚îÄ tests/
‚îÇ   ‚îú‚îÄ‚îÄ services/                
‚îÇ   ‚îú‚îÄ‚îÄ admin.py
‚îÇ   ‚îú‚îÄ‚îÄ apps.py
‚îÇ   ‚îú‚îÄ‚îÄ forms.py
‚îÇ   ‚îú‚îÄ‚îÄ models.py
‚îÇ   ‚îú‚îÄ‚îÄ urls.py
‚îÇ   ‚îî‚îÄ‚îÄ views.py
‚îÇ
‚îú‚îÄ‚îÄ siteweb/                     # Application pour le contenu g√©n√©ral du site (accueil, contact‚Ä¶)
‚îÇ   ‚îú‚îÄ‚îÄ tests/
‚îÇ   ‚îú‚îÄ‚îÄ services/                
‚îÇ   ‚îú‚îÄ‚îÄ admin.py
‚îÇ   ‚îú‚îÄ‚îÄ apps.py
‚îÇ   ‚îú‚îÄ‚îÄ forms.py
‚îÇ   ‚îú‚îÄ‚îÄ models.py
‚îÇ   ‚îú‚îÄ‚îÄ urls.py
‚îÇ   ‚îî‚îÄ‚îÄ views.py
‚îÇ
‚îú‚îÄ‚îÄ core/                        # Composants partag√©s et utilitaires
‚îÇ   ‚îú‚îÄ‚îÄ decorators.py            # D√©corateurs personnalis√©s (ex : v√©rification de r√¥le)
‚îÇ   ‚îî‚îÄ‚îÄ context_processors.py    # Variables globales inject√©es dans tous les templates
‚îÇ
‚îú‚îÄ‚îÄ templates/                   # Fichiers HTML organis√©s par application
‚îÇ   ‚îú‚îÄ‚îÄ accounts/
‚îÇ   ‚îú‚îÄ‚îÄ admin/
‚îÇ   ‚îú‚îÄ‚îÄ rdv/
‚îÇ   ‚îú‚îÄ‚îÄ siteweb/
‚îÇ   ‚îú‚îÄ‚îÄ base.html                # Template de base commun √† tout le site
‚îÇ   ‚îú‚îÄ‚îÄ footer.html              # Pied de page partag√©
‚îÇ   ‚îî‚îÄ‚îÄ navbar.html              # Barre de navigation partag√©e
‚îÇ
‚îú‚îÄ‚îÄ static/                      # Fichiers statiques globaux (CSS, JS, images)
‚îú‚îÄ‚îÄ media/                       # Fichiers upload√©s (ex : photos de profil)
```

## üìÇ Organisation des apps Django

Le projet est divis√© en trois applications Django distinctes, chacune ayant une responsabilit√© bien d√©finie pour assurer une architecture claire, maintenable et √©volutive :

1. `accounts` ‚Äì üîê Gestion des utilisateurs
Responsable de toute la logique li√©e aux comptes (utilisateurs personnalis√©s, groupes, connexion, inscription...).

Fonctionnalit√©s :
- Formulaire d‚Äôinscription avec email d‚Äôactivation
- Login / logout personnalis√©s
- Vue "Mon compte" affichant le r√¥le (client ou coach)
- Utilisateur personnalis√© (CustomUser) avec photo et bio
- Attribution automatique au groupe client
- Support des groupes coach et coach admin

2. `rdv` ‚Äì üìÖ Prise de rendez-vous
Contient toutes les fonctionnalit√©s li√©es √† la gestion des s√©ances entre clients et coachs.

Fonctionnalit√©s :
- Cr√©ation de rendez-vous (clients uniquement)
- Tableau de bord client et coach (s√©ances √† venir / pass√©es)
- Annulation de rendez-vous (par le coach avec motif)
- Notes internes du coach
- Vue d√©taill√©e d‚Äôune s√©ance
- Formulaires personnalis√©s avec validation (conflits d‚Äôhoraire, cr√©neau, etc.)

3. `siteweb` ‚Äì üåê Pages informatives
Application simple contenant les pages publiques du site (sans logique m√©tier).

Pages disponibles :
- Page d‚Äôaccueil
- Page "√Ä propos" 
- Page "Objectifs"
- Page "√©quipe" avec la liste des coachs

Ces vues utilisent des templates statiques ou semi-dynamiques, sans interaction avec des formulaires complexes.

## üöÄ Installation

1. Clone le d√©p√¥t :
```bash
git clone https://github.com/tonutilisateur/tonprojet.git
cd tonprojet
```

2. Cr√©e un environnement virtuel et active-le :
```bash
python -m venv .venv
source .venv/bin/activate  # Linux / MacOS
.venv\Scripts\activate     # Windows
```

3. installer les d√©pendances :
```bash
pip install -r requirements.txt
```

4. Configure la base de donn√©es (SQLite par d√©faut, modifier settings.py pour autre chose)

5. creer les migrations :
```bash
python manage.py makemigrations
```

si les dossiers de migration ne sont pas creer, utiliser ces commande:
```bash
python manage.py makemigrations accounts
python manage.py makemigrations rdv
```

6. Appliquer les migrations :
```bash
python manage.py migrate
```

7. Cr√©e un superutilisateur :
```bash
python manage.py createsuperuser
```

8. Lancer l'application :
```bash
python manage.py runserver
```

## üìß Utilisation de Mailcatcher

Lorsque l'utilisateur cr√©e un compte, il re√ßoit un email de confirmation contenant un lien d'activation. En environnement de d√©veloppement, nous utilisons MailCatcher pour intercepter et visualiser ces emails sans envoyer de vrai mail.

### Installer MailCatcher

Lien de MailCatcher: [https://mailcatcher.me/](https://mailcatcher.me/)

### Configuration dans `settings.py`
pour utiliser MailCatcheur, il faut le configurer dans le settings.py
```python
EMAIL_HOST = 'localhost'
EMAIL_PORT = 1025
EMAIL_HOST_USER = ''
EMAIL_HOST_PASSWORD = ''
EMAIL_USE_TLS = False
EMAIL_USE_SSL = False
DEFAULT_FROM_EMAIL = 'pirate@bateau-noir.fr'
```

>(√† modifier lors de la mise en prod)

### Utiliser MailCatcher

lancer la commande dans le CMD:
```bash
mailcatcher
```

visualisation des mails: [http://localhost:1080](http://localhost:1080)

## üß™ Tests unitaire

Lancer tout les tests unitaire:
```bash
python manage.py test 
``` 

Lancer un dossier test pr√©cis:
```bash
python manage.py test rdv 
``` 

Lancer une fonction pr√©cis d'un test :
```bash
python manage.py test rdv.test.test_models 
```

Fichier de tests:
1. `rdv`
2. `accounts`
3. `siteweb`

## üè¶ Base de donn√©es

### üìÖ MCD
![MCD](image_readme/MCD.png)

### üßæ MLD

accounts_customuser:
```sql
TABLE accounts_customuser (
    id                          INTEGER          PK AUTOINCREMENT,
    password                    VARCHAR(128)     NOT NULL,
    last_login                  DATETIME         NULL,
    is_superuser                BOOLEAN          NOT NULL DEFAULT FALSE,
    username                    VARCHAR(150)     NOT NULL UNIQUE,
    first_name                  VARCHAR(150)     NOT NULL,
    last_name                   VARCHAR(150)     NOT NULL,
    email                       VARCHAR(254)     NOT NULL,
    is_staff                    BOOLEAN          NOT NULL DEFAULT FALSE,
    is_active                   BOOLEAN          NOT NULL DEFAULT TRUE,
    date_joined                 DATETIME         NOT NULL,
    prenom                      VARCHAR(100)     NOT NULL,
    nom                         VARCHAR(100)     NOT NULL,
    photo                       VARCHAR(100)     NULL,         -- Chemin du fichier image
    description_personnelle     TEXT             NULL
)
```

rdv_seance:
```sql
TABLE rdv_seance (
    id                  INTEGER      PK AUTOINCREMENT,
    date                DATE         NOT NULL,
    heure_debut         TIME         NOT NULL,
    objet               VARCHAR(200) NOT NULL,
    note_coach          TEXT         NULL,
    client_id           BIGINT       NOT NULL,               -- FK ‚Üí accounts_customuser(id)
    motif_annulation    TEXT         NULL,
    statut              VARCHAR(10)  NOT NULL DEFAULT 'actif',

    CONSTRAINT fk_client FOREIGN KEY (client_id) REFERENCES accounts_customuser(id),
    CONSTRAINT uniq_creneau UNIQUE (date, heure_debut)
)

```

## üîê Authentification & R√¥les

Le projet utilise le syst√®me d‚Äôauthentification int√©gr√© de Django, enrichi par une gestion des r√¥les via les groupes (auth_group). Chaque utilisateur appartient √† l‚Äôun des groupes suivants :

- üë§ Client
    - S'inscrit via un formulaire (/signup/)
    - Re√ßoit un email d'activation (via Mailcatcher en dev)
    - Peut se connecter, consulter son tableau de bord et :
        - Prendre un rendez-vous
        - Annuler une s√©ance avec un coach
        - Voir ses s√©ances pass√©es et √† venir
- üßë‚Äçüè´ Coach
    - Assign√© manuellement au groupe "coach" via l‚Äôadministration Django
    - Peut acc√©der √† un tableau de bord sp√©cifique (coach)
    - Peut consulter tous les rendez-vous
    - Peut ajouter des notes internes sur les s√©ances
    - Peut annuler un rendez-vous (en saisissant un motif)
- üßë‚Äçüíº Coach admin
    - M√™me comportement que le r√¥le coach
    - Peut avoir un acc√®s √©tendu ou administratif (selon la configuration)
    - Utilis√© pour distinguer les coachs ayant des responsabilit√©s sp√©cifiques

> Lors de l'inscription, les utilisateurs sont automatiquement ajout√©s au groupe client.

> Les r√¥les coach et coach admin sont attribu√©s via le panneau d'administration Django (/admin/), en affectant l'utilisateur aux groupes correspondants.


## üìö Fonctionnalit√©s
- Inscription avec confirmation par email (Mailcatcher en dev)
- Connexion/d√©connexion
- Tableau de bord diff√©renci√© client / coach
- Prise de rendez-vous avec v√©rification de conflits
- Annulation avec saisie de motif
- Notes internes du coach
- Administration Django

## üñºÔ∏è Capture d'√©cran

![MCD](image_readme/capture_site_1.png)

![MCD](image_readme/capture_site_2.png)

## üìÑ Licence
Ce projet est sous licence MIT ‚Äî voir le fichier LICENSE.